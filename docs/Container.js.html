<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Container.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Container.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*jslint white: true, browser: true, plusplus: true, nomen: true, vars: true */
/*global console, createjs, $, AdventureGame */


this.AdventureGame = this.AdventureGame || {};

/**
* Comtainer holds a collection of items
* It is not currently used and some troubleshooting will be required (this came from an earlier version that did use containers)
* The player's inventory is a container as is a toolbox or set of shelves
*/
(function() {
	"use strict";

	var Container = function(options) {
		this.initialize(options);
	};
	var p = Container.prototype;
	


	p.initialize = function(options) {
		if(!options.name) {
			throw "No name set for container";
		}
		this.slots = options.numSlots || 10;
		this.items = options.items || [];
		this.name = options.name;
		// If there are more items than slots resize the container to fit them all
		if(this.items.length > this.slots) {
			this.slots = options.items.length;
		}
		var itemIndex = 0;
		for(itemIndex=0; itemIndex &lt; this.items.length; itemIndex++) {
			this.addItem(options.items[itemIndex]);
		}
	};

	p.addItem = function(item) {
		var returnVal = -1, i;
		if(!item instanceof AdventureGame.Item) {
			console.log(item);
			throw "Invalid item";
		}
		if(this.items.length &lt; this.slots) {
			// Find the next empty slot in the inventory
			for(i=0; i &lt; this.items.length; i++) {
				if(this.items[i] === null) {
					console.log("Using inventory slot "+i);
					item.slot = i;
					this.items[i] = item;
					return i;
				}
			}
			console.log("Using inventory slot "+i);
			item.slot = i;
			item.parentContainer = this;
			this.items[i] = item;
			returnVal = i;
		} else {
			console.log("Container full");
		}
		return returnVal;
	};
	/**
	* Remove the given item from this array 
	* The item will only be removed if it correctly references its slot in the array
	*/
	p.removeItem = function(item) {
		var 
			returnVal = -1,
			slot = item.slot;
		if(item.currentContainer === this &amp;&amp; this.items[item.slot] === item) {
			this.items[item.slot] = null;
			item.currentContainer = null;
			item.slot = null;
			returnVal = slot;
		}
		return returnVal;
	};
	p.refresh = function() {
		console.log("To be implemented");
	};
	/**
	* Show dialog for open container
	* Load container from container array and create a div mirroring the items in there. 
	*
	*/
	p.open = function() {
		var containerDiv, i, slotDiv, itemImg, dialog;
		console.log("Opening container "+this.name);
		containerDiv = document.createElement('div');
		containerDiv.id = 'container'+this.name;
		containerDiv.className = 'container';
		for(i=0; i&lt;this.slots; i++) {
			slotDiv = document.createElement('div');
			slotDiv.id = "container_slot_"+i;
			slotDiv.className = 'slot';
			containerDiv.appendChild(slotDiv);
			if(this.items.length >= i+1 &amp;&amp; this.items[i] !== null) {
				itemImg = document.createElement('img');
				itemImg.src = this.items[i].image.src;
				slotDiv.appendChild(itemImg);
				$(itemImg).on('click', {item:this.items[i]}, this.setClickHandler());
			}
		}

		dialog = new AdventureGame.Dialog({
			text: '&lt;h3>'+this.name+'&lt;/h3>',
			domContent: containerDiv
		});
		dialog.show();
		
		AdventureGame.stage.on('click', function() {
		});	
	};
	
	p.setClickHandler = function() {
		return function(event) {
			event.data.item.activate();
		};
	};
	
	AdventureGame.Container = Container;
}());
	</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="GameBase.html">GameBase</a></li><li><a href="Item.html">Item</a></li><li><a href="Room.html">Room</a></li></ul><h3>Namespaces</h3><ul><li><a href="AventureGame.html">AventureGame</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha10</a> on Wed Nov 05 2014 11:57:44 GMT+0930 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
